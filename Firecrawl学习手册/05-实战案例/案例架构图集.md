# Firecrawl å®æˆ˜æ¡ˆä¾‹æ¶æ„å›¾é›†

> **åˆ›å»ºæ—¶é—´**: 2025-10-27
> **ç”¨é€”**: ä¸ºPDFç”µå­ä¹¦æä¾›å¯è§†åŒ–æ¶æ„å›¾å’Œæµç¨‹å›¾
> **æŠ€æœ¯**: Mermaidå›¾è¡¨

---

## ğŸ—ï¸ æ¡ˆä¾‹ 01: å¤å¨å¤·æ–°é—»é‡‡é›†å™¨æ¶æ„å›¾

### ç³»ç»Ÿæ¶æ„

```mermaid
graph TB
    A[ç”¨æˆ·è¯·æ±‚] --> B[æ–°é—»é‡‡é›†å™¨]
    B --> C{é€‰æ‹©é‡‡é›†æ–¹å¼}
    C -->|å•ç¯‡æ–°é—»| D[Scrape API]
    C -->|æ‰¹é‡æ–°é—»| E[Crawl API]
    C -->|æœç´¢æ–°é—»| F[Search API]

    D --> G[å†…å®¹è§£æå™¨]
    E --> G
    F --> G

    G --> H{æ•°æ®éªŒè¯}
    H -->|æœ‰æ•ˆ| I[æ•°æ®å­˜å‚¨]
    H -->|æ— æ•ˆ| J[é”™è¯¯æ—¥å¿—]

    I --> K[JSONæ–‡ä»¶]
    I --> L[Markdownæ–‡ä»¶]
    I --> M[CSVæ–‡ä»¶]

    K --> N[æ•°æ®åˆ†æ]
    L --> O[äººå·¥å®¡æ ¸]
    M --> P[Excelå¯¼å…¥]

    style A fill:#e1f5ff
    style B fill:#fff3e0
    style G fill:#f3e5f5
    style I fill:#e8f5e9
```

### æ•°æ®æµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant S as çˆ¬è™«è„šæœ¬
    participant F as Firecrawl API
    participant D as æ•°æ®åº“
    participant C as ç¼“å­˜

    U->>S: å¯åŠ¨é‡‡é›†ä»»åŠ¡
    S->>C: æ£€æŸ¥ç¼“å­˜

    alt ç¼“å­˜å‘½ä¸­
        C-->>S: è¿”å›ç¼“å­˜æ•°æ®
    else ç¼“å­˜æœªå‘½ä¸­
        S->>F: å‘é€çˆ¬å–è¯·æ±‚
        F->>F: æ¸²æŸ“é¡µé¢ï¼ˆJSæ”¯æŒï¼‰
        F->>F: æå–å†…å®¹
        F-->>S: è¿”å›Markdownæ•°æ®
        S->>C: æ›´æ–°ç¼“å­˜ï¼ˆ1å°æ—¶ï¼‰
    end

    S->>S: æ•°æ®æ¸…æ´—
    S->>S: æ ¼å¼åŒ–
    S->>D: ä¿å­˜åˆ°æ•°æ®åº“
    S-->>U: è¿”å›é‡‡é›†ç»“æœ
```

---

## ğŸ½ï¸ æ¡ˆä¾‹ 02: åäººå•†å®¶ä¿¡æ¯é‡‡é›†æ¶æ„

### ç³»ç»Ÿæ¶æ„

```mermaid
graph LR
    A[å•†å®¶ç›®å½•é¡µ] --> B[Batch Scrape API]
    B --> C[å•†å®¶è¯¦æƒ…é¡µ x N]

    C --> D{æå–ä¿¡æ¯}
    D --> E[åŸºæœ¬ä¿¡æ¯]
    D --> F[è”ç³»æ–¹å¼]
    D --> G[è¥ä¸šæ—¶é—´]
    D --> H[ç”¨æˆ·è¯„è®º]

    E --> I[å•†å®¶æ•°æ®åº“]
    F --> I
    G --> I
    H --> J[æƒ…æ„Ÿåˆ†æ]

    J --> K[è¯„åˆ†è®¡ç®—]
    K --> I

    I --> L[APIæœåŠ¡]
    L --> M[HawaiiHubå‰ç«¯]

    style A fill:#fff3e0
    style B fill:#e1f5ff
    style I fill:#e8f5e9
    style M fill:#f3e5f5
```

### æ•°æ®æ¨¡å‹

```mermaid
erDiagram
    RESTAURANT ||--o{ REVIEW : has
    RESTAURANT ||--o{ MENU_ITEM : offers
    RESTAURANT }o--|| CATEGORY : belongs_to
    RESTAURANT }o--|| LOCATION : located_at

    RESTAURANT {
        string id PK
        string name
        string address
        string phone
        string website
        float rating
        json hours
        datetime created_at
    }

    REVIEW {
        string id PK
        string restaurant_id FK
        string author
        int rating
        string content
        datetime date
    }

    MENU_ITEM {
        string id PK
        string restaurant_id FK
        string name
        float price
        string description
    }

    CATEGORY {
        string id PK
        string name
        string description
    }

    LOCATION {
        string id PK
        string area
        float latitude
        float longitude
    }
```

---

## ğŸ  æ¡ˆä¾‹ 03: ç§Ÿæˆ¿ä¿¡æ¯ç›‘æ§ç³»ç»Ÿæ¶æ„

### å®æ—¶ç›‘æ§æµç¨‹

```mermaid
graph TD
    A[å®šæ—¶ä»»åŠ¡ Cron] --> B[ç§Ÿæˆ¿ç½‘ç«™çˆ¬è™«]
    B --> C[Firecrawl Crawl API]

    C --> D[æ–°æˆ¿æºåˆ—è¡¨]
    D --> E{å¯¹æ¯”å†å²æ•°æ®}

    E -->|æ–°æˆ¿æº| F[æ ‡è®°ä¸ºNEW]
    E -->|ä»·æ ¼å˜åŠ¨| G[æ ‡è®°ä¸ºPRICE_CHANGE]
    E -->|å·²ä¸‹æ¶| H[æ ‡è®°ä¸ºREMOVED]
    E -->|æ— å˜åŒ–| I[æ›´æ–°æ—¶é—´æˆ³]

    F --> J[å‘é€é€šçŸ¥]
    G --> J
    H --> K[å½’æ¡£æ•°æ®]

    J --> L[é‚®ä»¶é€šçŸ¥]
    J --> M[Telegram Bot]
    J --> N[HawaiiHub Appæ¨é€]

    I --> O[æ•°æ®åº“æ›´æ–°]
    F --> O
    G --> O

    style A fill:#fff3e0
    style J fill:#ffebee
    style O fill:#e8f5e9
```

### Change Trackingæœºåˆ¶

```mermaid
sequenceDiagram
    participant C as Cronä»»åŠ¡
    participant S as çˆ¬è™«æœåŠ¡
    participant F as Firecrawl API
    participant D as æ•°æ®åº“
    participant N as é€šçŸ¥æœåŠ¡

    loop æ¯å°æ—¶æ‰§è¡Œ
        C->>S: è§¦å‘çˆ¬å–ä»»åŠ¡
        S->>F: è¯·æ±‚çˆ¬å–ï¼ˆenableChangeTracking=trueï¼‰
        F->>F: çˆ¬å–é¡µé¢
        F->>F: ä¸ä¸Šæ¬¡å¿«ç…§å¯¹æ¯”
        F-->>S: è¿”å›å˜æ›´å†…å®¹

        alt æœ‰æ–°å†…å®¹
            S->>D: æŸ¥è¯¢å†å²è®°å½•
            D-->>S: è¿”å›å¯¹æ¯”ç»“æœ
            S->>S: è®¡ç®—ä»·æ ¼å˜åŠ¨
            S->>N: å‘é€é€šçŸ¥
            N->>N: ç”¨æˆ·A: æ–°æˆ¿æºæé†’
            N->>N: ç”¨æˆ·B: é™ä»·æé†’
        end

        S->>D: æ›´æ–°æ•°æ®åº“
    end
```

---

## ğŸ¤– æ¡ˆä¾‹ 11: æ™ºèƒ½é—®ç­”ç³»ç»Ÿæ¶æ„ï¼ˆRAGï¼‰

### RAGç³»ç»Ÿæ¶æ„

```mermaid
graph TB
    A[ç”¨æˆ·é—®é¢˜] --> B[é—®é¢˜é¢„å¤„ç†]
    B --> C[å‘é‡åŒ–]
    C --> D[å‘é‡æ•°æ®åº“ Pinecone]

    D --> E[æ£€ç´¢Top-Kç›¸å…³æ–‡æ¡£]
    E --> F[é‡æ’åº Reranking]

    F --> G[æ„å»ºPrompt]
    A --> G

    G --> H[LLM GPT-4]
    H --> I[ç”Ÿæˆç­”æ¡ˆ]

    I --> J{ç­”æ¡ˆè´¨é‡æ£€æŸ¥}
    J -->|ä¼˜è´¨| K[è¿”å›ç”¨æˆ·]
    J -->|éœ€æ”¹è¿›| L[åé¦ˆå¾ªç¯]

    L --> M[Fine-tuningæ•°æ®]
    M --> H

    subgraph æ•°æ®æº
        N[æ–°é—»æ–‡ç« ] --> O[Firecrawlé‡‡é›†]
        P[å•†å®¶ä¿¡æ¯] --> O
        Q[ç¤¾åŒºå¸–å­] --> O
        O --> R[æ–‡æ¡£åˆ‡ç‰‡]
        R --> S[å‘é‡åŒ–]
        S --> D
    end

    style A fill:#e1f5ff
    style H fill:#fff3e0
    style D fill:#f3e5f5
    style K fill:#e8f5e9
```

### æ•°æ®å¤„ç†æµç¨‹

```mermaid
flowchart LR
    A[åŸå§‹ç½‘é¡µ] --> B[Firecrawl Scrape]
    B --> C[Markdownå†…å®¹]

    C --> D{æ–‡æ¡£ç±»å‹}
    D -->|æ–°é—»| E[æ–°é—»è§£æå™¨]
    D -->|å•†å®¶| F[å•†å®¶è§£æå™¨]
    D -->|å…¶ä»–| G[é€šç”¨è§£æå™¨]

    E --> H[æ–‡æ¡£åˆ‡ç‰‡ 512 tokens]
    F --> H
    G --> H

    H --> I[ç”ŸæˆEmbedding]
    I --> J[Pineconeå­˜å‚¨]

    J --> K[ç´¢å¼•ä¼˜åŒ–]
    K --> L[RAGæ£€ç´¢]

    style B fill:#fff3e0
    style I fill:#e1f5ff
    style J fill:#f3e5f5
```

---

## ğŸ¢ æ¡ˆä¾‹ 15: HawaiiHubå®Œæ•´æ•°æ®å¹³å°æ¶æ„

### å¾®æœåŠ¡æ¶æ„

```mermaid
graph TB
    subgraph ç”¨æˆ·å±‚
        A[Webå‰ç«¯ Next.js]
        B[ç§»åŠ¨ç«¯ React Native]
        C[ç®¡ç†åå°]
    end

    subgraph APIç½‘å…³
        D[Nginxè´Ÿè½½å‡è¡¡]
        E[API Gateway]
    end

    subgraph æœåŠ¡å±‚
        F[ç”¨æˆ·æœåŠ¡]
        G[å•†å®¶æœåŠ¡]
        H[æ–°é—»æœåŠ¡]
        I[ç§Ÿæˆ¿æœåŠ¡]
        J[æœç´¢æœåŠ¡]
        K[æ¨èæœåŠ¡]
    end

    subgraph æ•°æ®é‡‡é›†å±‚
        L[æ–°é—»çˆ¬è™«]
        M[å•†å®¶çˆ¬è™«]
        N[ç§Ÿæˆ¿çˆ¬è™«]
        O[Firecrawl API]
    end

    subgraph æ•°æ®å­˜å‚¨
        P[(PostgreSQL ä¸»åº“)]
        Q[(Redis ç¼“å­˜)]
        R[(Elasticsearch æœç´¢)]
        S[(Pinecone å‘é‡)]
    end

    A --> D
    B --> D
    C --> D

    D --> E
    E --> F
    E --> G
    E --> H
    E --> I
    E --> J
    E --> K

    L --> O
    M --> O
    N --> O

    O --> P
    F --> P
    G --> P
    H --> P
    I --> P

    F --> Q
    G --> Q
    H --> Q

    J --> R
    K --> S

    style A fill:#e1f5ff
    style O fill:#fff3e0
    style P fill:#e8f5e9
    style S fill:#f3e5f5
```

### æ•°æ®æµè½¬

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant W as Webå‰ç«¯
    participant G as API Gateway
    participant S as å•†å®¶æœåŠ¡
    participant C as çˆ¬è™«æœåŠ¡
    participant F as Firecrawl
    participant D as æ•°æ®åº“
    participant R as Redis

    U->>W: æœç´¢"ç«å¥´é²é²ä¸­é¤"
    W->>G: GET /api/restaurants?q=ä¸­é¤
    G->>S: è½¬å‘è¯·æ±‚

    S->>R: æ£€æŸ¥ç¼“å­˜
    alt ç¼“å­˜å‘½ä¸­
        R-->>S: è¿”å›ç¼“å­˜ç»“æœ
    else ç¼“å­˜æœªå‘½ä¸­
        S->>D: æŸ¥è¯¢æ•°æ®åº“
        D-->>S: è¿”å›ç»“æœ
        S->>R: æ›´æ–°ç¼“å­˜ï¼ˆ10åˆ†é’Ÿï¼‰
    end

    S-->>G: è¿”å›å•†å®¶åˆ—è¡¨
    G-->>W: è¿”å›JSON
    W-->>U: å±•ç¤ºç»“æœ

    Note over C,F: åå°å®šæ—¶ä»»åŠ¡ï¼ˆæ¯æ—¥å‡Œæ™¨2ç‚¹ï¼‰
    C->>F: æ‰¹é‡çˆ¬å–å•†å®¶ä¿¡æ¯
    F-->>C: è¿”å›Markdownæ•°æ®
    C->>C: æ•°æ®æ¸…æ´—å’ŒéªŒè¯
    C->>D: æ›´æ–°æ•°æ®åº“
    C->>R: æ¸…ç©ºç›¸å…³ç¼“å­˜
```

---

## ğŸ“Š æŠ€æœ¯æ ˆæ€»è§ˆ

```mermaid
graph LR
    subgraph å‰ç«¯
        A[Next.js 14]
        B[React Native]
        C[TailwindCSS]
    end

    subgraph åç«¯
        D[Python 3.11]
        E[FastAPI]
        F[Celery]
    end

    subgraph æ•°æ®é‡‡é›†
        G[Firecrawl API]
        H[Playwright]
    end

    subgraph æ•°æ®å­˜å‚¨
        I[PostgreSQL]
        J[Redis]
        K[Elasticsearch]
        L[Pinecone]
    end

    subgraph AI/ML
        M[GPT-4]
        N[Gemini Pro]
        O[OpenAI Embeddings]
    end

    subgraph éƒ¨ç½²
        P[Vercel]
        Q[Railway]
        R[Docker]
    end

    A --> E
    B --> E
    E --> D
    D --> G
    D --> F

    E --> I
    E --> J
    E --> K

    E --> M
    E --> N
    E --> O
    O --> L

    A --> P
    E --> Q
    F --> R
```

---

## ğŸ¯ æ€§èƒ½æŒ‡æ ‡

### ç³»ç»Ÿæ€§èƒ½å¯¹æ¯”

```mermaid
gantt
    title Firecrawl vs ä¼ ç»Ÿçˆ¬è™«æ€§èƒ½å¯¹æ¯”
    dateFormat X
    axisFormat %s

    section å“åº”æ—¶é—´
    ä¼ ç»Ÿçˆ¬è™«          :0, 5
    Firecrawl         :0, 1

    section æˆåŠŸç‡
    ä¼ ç»Ÿçˆ¬è™«          :0, 7
    Firecrawl         :0, 9.5

    section å¼€å‘æ—¶é—´
    ä¼ ç»Ÿçˆ¬è™«          :0, 10
    Firecrawl         :0, 2
```

### æˆæœ¬åˆ†æ

| æ–¹æ¡ˆ      | å¼€å‘æˆæœ¬ | è¿ç»´æˆæœ¬   | æœˆåº¦APIè´¹ç”¨ | æ€»æˆæœ¬ï¼ˆé¦–å¹´ï¼‰ |
| --------- | -------- | ---------- | ----------- | -------------- |
| ä¼ ç»Ÿçˆ¬è™«  | $5,000   | $800/æœˆ    | $0          | $14,600        |
| Firecrawl | $500     | $100/æœˆ    | $200/æœˆ     | $4,100         |
| **èŠ‚çœ**  | **-90%** | **-87.5%** | +$200       | **-71.9%**     |

---

## ğŸ“ˆ æ•°æ®å¢é•¿è¶‹åŠ¿

```mermaid
xychart-beta
    title "HawaiiHub æ•°æ®å¢é•¿ï¼ˆ2025å¹´é¢„æµ‹ï¼‰"
    x-axis [1æœˆ, 2æœˆ, 3æœˆ, 4æœˆ, 5æœˆ, 6æœˆ, 7æœˆ, 8æœˆ, 9æœˆ, 10æœˆ, 11æœˆ, 12æœˆ]
    y-axis "æ•°æ®é‡ï¼ˆåƒæ¡ï¼‰" 0 --> 100
    line [5, 8, 12, 18, 25, 35, 45, 58, 70, 82, 92, 100]
    line [2, 5, 8, 12, 18, 25, 33, 42, 52, 63, 75, 88]
```

**è¯´æ˜**ï¼š

- è“çº¿ï¼šæ–°é—»æ–‡ç« æ•°é‡
- æ©™çº¿ï¼šå•†å®¶ä¿¡æ¯æ•°é‡

---

## ğŸ† æœ€ä½³å®è·µæ€»ç»“

### å¼€å‘æµç¨‹

```mermaid
flowchart TD
    A[éœ€æ±‚åˆ†æ] --> B{é€‰æ‹©Firecrawlç«¯ç‚¹}
    B -->|å•é¡µ| C[Scrape API]
    B -->|å¤šé¡µ| D[Crawl API]
    B -->|æœç´¢| E[Search API]

    C --> F[ç¼–å†™é‡‡é›†è„šæœ¬]
    D --> F
    E --> F

    F --> G[æ•°æ®éªŒè¯]
    G --> H{è´¨é‡æ£€æŸ¥}

    H -->|é€šè¿‡| I[ç”Ÿäº§éƒ¨ç½²]
    H -->|å¤±è´¥| J[ä¼˜åŒ–å‚æ•°]

    J --> F

    I --> K[ç›‘æ§å‘Šè­¦]
    K --> L{è¿è¡ŒçŠ¶æ€}

    L -->|æ­£å¸¸| M[æŒç»­è¿è¡Œ]
    L -->|å¼‚å¸¸| N[æ•…éšœæ’æŸ¥]

    N --> O[ä¿®å¤é—®é¢˜]
    O --> I

    style A fill:#e1f5ff
    style I fill:#e8f5e9
    style K fill:#fff3e0
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-10-27
**ç»´æŠ¤å›¢é˜Ÿ**: HawaiiHub AI Team
